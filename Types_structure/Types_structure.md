### Домашнее задание к занятию "6.1. Типы и структура СУБД"

#### Задача 1

> <p align="justify"> Архитектор ПО решил проконсультироваться у вас, какой тип БД лучше выбрать для хранения определенных данных.
>
> <p align="justify"> Он вам предоставил следующие типы сущностей, которые нужно будет хранить в БД:

- > Электронные чеки в json виде

<p align="justify"> Данные, представленные парами ключ-значение, сжимаются как хранилище  документов схожим с хранилищем «ключ-значение» образом, с той лишь  разницей, что хранимые значения (документы) имеют определённую структуру и кодировку данных. XML, JSON и BSON — некоторые из стандартных  распространённых кодировок.</p>

- > <p align="justify"> Склады и автомобильные дороги для логистической компании

<p align="justify"> Сетевая - иерархическая с множеством узлов, но в зависимости от целей, можно использовать графовую СУБД. Это особый тип СУБД для работы с графами, их узлами и свойствами, а также произвольными отношениями между узлами.</p>

- > Генеалогические деревья

<p align="justify"> Реляционные СУБД чаще всего используются для построения решений OLTP (Online Transaction Processing). В таких решениях СУБД работает с небольшими по размерам транзакциями, но идущими большим потоком, и при этом от системы требуется минимальное время отклика, а так же возможность, при определенных условиях, отменить любые изменения выполняемых в рамках транзакции.</p>

- > <p align="justify"> Кэш идентификаторов клиентов с ограниченным временем жизни для движка аутенфикации

<p align="justify"> Для хранения кеша лучше подходят NoSQL базы, т.к. работают быстро.</p>

- > Отношения клиент-покупка для интернет-магазина

Так же подойдут реляционные СУБД 

>  <p align="justify"> Выберите подходящие типы СУБД для каждой сущности и объясните свой выбор.

---

#### Задача 2

> <p align="justify"> Вы создали распределенное высоконагруженное приложение и хотите классифицировать его согласно CAP-теореме. Какой классификации по CAP-теореме соответствует ваша система, если (каждый пункт - это отдельная реализация вашей системы и для каждого пункта надо привести классификацию):

- > <p align="justify"> Данные записываются на все узлы с задержкой до часа (асинхронная запись)

  <p align="justify"> По CAP теореме - CA, когда данные во всех узлах кластера согласованы и доступны, но не устойчивы к разделению.</p>

  <p align="justify"> По PACELC теореме вероятно PA/EL, т.к. задержки в один час скорей всего будет достаточно, чтобы устранить небольшие сетевые проблемы, по этому логичней делать упор на отзывчивость.</p>

- > <p align="justify"> При сетевых сбоях, система может разделиться на 2 раздельных кластера

  <p align="justify"> По CAP теореме - AP, не гарантирует целостность данных, обеспечивая их доступность и устойчивость к разделению. Такая система отлично справляется с отказами нескольких узлов, но, когда они снова начинают работать, возможна выдача пользователям старых данных.</p>

  <p align="justify"> По PACELC теореме PA/EL предназначенных для хранения и обработки данных: высокая доступность (A) при разделении (P) системы иначе (E) высокая скорость ответа (L).</p>

- > <p align="justify"> Система может не прислать корректный ответ или сбросить соединение

  <p align="justify"> По CAP теореме - CP, т.к. условие доступности требует, чтобы запрос всегда завершался корректным ответом.</p>

  <p align="justify"> По PACELC теореме PC/EC, будут жертвовать доступностью, то есть остаётся согласованность.</p>

> <p align="justify"> А согласно PACELC-теореме, как бы вы классифицировали данные реализации?

---

#### Задача 3

> <p align="justify"> Могут ли в одной системе сочетаться принципы BASE и ACID? Почему?

**Принципы BASE и ACID сочетаться не могут.**

**принципы модели ACID**

- <p align="justify"> атомарность транзакций гарантирует, что каждая транзакция базы данных является единым блоком, который использует подход «все или ничего» к выполнению. Если какой-либо оператор в транзакции терпит неудачу, вся транзакция откатывается.</p>

- <p align="justify"> Реляционные базы данных также обеспечивают согласованность каждой транзакции. Если какой-либо элемент атомарной транзакции нарушит целостность базы данных, вся транзакция завершится неудачно.</p>

- <p align="justify"> Механизм базы данных обеспечивает изоляцию между несколькими транзакциями, происходящими     в одно и то же время. Каждая транзакция происходит до или после каждой другой транзакции, и представление базы данных, которое транзакция видит в своем начале, изменяется только самой транзакцией до ее завершения. Ни одна транзакция не должна видеть промежуточный продукт другой транзакции.</p>

- <p align="justify"> Окончательный принцип ACID, долговечность, гарантирует, что после фиксации транзакции в базе данных она постоянно сохраняется с помощью резервных копий и журналов транзакций. В случае сбоя эти механизмы могут использоваться для восстановления зафиксированных транзакций.</p>

**принципы BASE**

- <p align="justify"> Базовая доступность. Подход к базе данных NoSQL фокусируется на доступности данных даже при наличии множества сбоев. Это     достигается путем использования распределенного подхода к управлению базами данных. Вместо того чтобы поддерживать одно большое хранилище данных и сосредоточиться на отказоустойчивости этого хранилища, базы данных NoSQL распределяют данные по многим системам хранения с высокой степенью репликации. В маловероятном случае, если сбой нарушает доступ к сегменту данных, это не обязательно приводит к полному отключению базы данных.</p>

- <p align="justify"> Мягкое состояние. Базы данных BASE почти полностью отказываются от требований огласованности модели ACID. Одна из основных концепций, лежащих в основе BASE, заключается в том, что согласованность данных является проблемой разработчика и не должна обрабатываться базой данных. </p>

- <p align="justify"> Возможная последовательность. Единственное требование,     которое базы данных NoSQL имеют в отношении согласованности, – это     требование, чтобы в какой-то момент в будущем данные конвергировались в     согласованное состояние. Однако никаких гарантий относительно того, когда     это произойдет, не дается. Это полное отклонение от требования немедленной     согласованности ACID, которое запрещает выполнение транзакции до тех пор,     пока предыдущая транзакция не будет завершена и база данных не приблизится     к согласованному состоянию.</p>

<p align="justify"> Модель BASE не подходит для каждой ситуации, но она, безусловно, является гибкой альтернативой модели ACID для баз данных, которые не требуют строгого соблюдения реляционной модели.</p>

---

#### Задача 4

> <p align="justify"> Вам дали задачу написать системное решение, основой которого бы послужили:
>
> - фиксация некоторых значений с временем жизни
> - реакция на истечение таймаута
>
> <p align="justify"> Вы слышали о key-value хранилище, которое имеет механизм [Pub/Sub](https://habr.com/ru/post/278237/). Что это за система? Какие минусы выбора данной системы?

<p align="justify"> Предположу что это Redis – это высокопроизводительная БД с открытым исходным кодом (лицензия BSD), которая хранит данные в памяти, доступ к которым осуществляется по ключу доступа. Так же Редис это кэш и брокер сообщений.</div>

Минусы выбора Redis:

- <p align="justify"> Все данные должны поместиться в памяти, а не на диск с кэшируемым части данных     в память, в связи с этим управлять большим количеством данных (чем у нас     есть память) с Redis     мы     не можем.</p>

- <p align="justify"> Redis-это сервер структуры данных в нем нет  языка     запросов (только команды). Мы не можем отправлять специальные запросы (как     в SQL в СУБД), по этому теряется оперативность поиска данных.</p>

- <p align="justify"> Можно потерять данные при сбое     сервера или перезапуске сервиса. </p>

- <p align="justify"> Redis предлагает только базовую     безопасность (с точки зрения прав доступа) на уровне экземпляра, относительно     других которые предоставляют подробные списки управления доступом к     объектам (или управление ролями).</div>