## Домашнее задание к занятию "5.1. Введение в  виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и  областей применения."

### Задача 1: Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

 Полная (аппаратная) виртуализация, или «родная» виртуализация, является другим способом виртуализации. Эта модель использует менеджер виртуальных машин (гипервизор), который осуществляет связь между гостевой операционной системой и аппаратными средствами системы. Взаимодействие между гостевой операционной системой (ОС) и оборудованием осуществляется посредством гипервизора. Внутри гипервизора должна быть установлена и настроена определенная защита, потому, что основные аппаратные средства не принадлежат ОС, а разделяются гипервизором. 

 Паравиртуализация требует, чтобы гостевая ОС была изменена для гипервизора, и это является недостатком метода. Однако, паравиртуализация предлагает высокую производительность, почти как у реальной системы. При этом, как и при полной виртуализации, одновременно могут поддерживаться различные операционные системы. Но определенным недостатком паравиртуализации можно считать ограниченное количество поддерживаемых ОС. Поскольку есть необходимость вносить изменения в код ядра ОС, что не всегда представляется возможным в силу закрытости некоторых ОС.

 Виртуализация уровня операционной системы. Эта техника виртуализирует серверы непосредственно над операционной системой. Этот метод поддерживает единственную операционную систему и, в самом общем случае, просто изолирует независимые виртуальные серверы (контейнеры) друг от друга. Для разделения ресурсов одного сервера между контейнерами, данная виртуализация требует внесения изменений в ядро операционной системы, но при этом преимуществом является родная производительность, без «накладных расходов» на виртуализацию устройств.

 Получается, что основная разница в необходимости модифицировать гостевые ОС:
 - При аппаратной виртуализации она не требуется;
 - Для паравиртуализации нужна модификация ядра и драйверов;
 - При виртуализации средствами ОС, гостевая ОС не имеет собственного ядра, использует ядро хоста.
 - Чем больше модифицирована ОС, тем производительность выше. Наиболее высокая у виртуализации средствами ОС, так как приложения напрямую используют ядро хостовой ОС.

### Задача 2: Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

- *физические сервера*
- *паравиртуализация*
- *виртуализация уровня ОС*

*Условия использования:*

- *Высоконагруженная база данных, чувствительная к     отказу*
- *Различные Java-приложения*
- *Windows системы для использования Бухгалтерским     отделом*
- *Системы, выполняющие высокопроизводительные     расчеты на GPU*

*Опишите, почему вы выбрали к каждому целевому использованию такую организацию.* 

Ответ:

·    Высоконагруженная база данных, чувствительная к отказу - физические сервера

требуется более высокая производительность, аппаратное размещение дает более высокий отклик. Постоянно нагруженной системе потребуется максимум ресурсов хоста, присутствие соседей которые могут их отобрать тоже нежелательно.

 ·    Различные Java-приложения - виртуализация уровня ОС

Требуется меньше ресурсов, выше скорость масштабирования при необходимости расширения. Нет жестких требований к аппаратным ресурсам, требует меньше ресурсов на администрирование.

 ·    Windows системы для использования Бухгалтерским отделом - паравиртуализация

 Виртуализация поможет системе быть более отказоустойчивой. Эфективнее делается клонирование всей виртуальной машины, возможность расширении ресурсов на уровне виртуальной машины. Нет критичных требований к доступу к аппаратной составляющей сервера.

 ·    Системы, выполняющие высокопроизводительные расчеты на GPU - виртуализация уровня ОС

 GPU может потребоваться в проектах с машинным обучением, из предложенных видов виртуализации виртуализация для GPU возможна только виртуализация средствами ОС.

### Задача 3: Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

*1.*   *100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.*

Наверное я бы воспользовалась MS Hyper-V - так как он хорошо поддерживает виртуальные машины с Windows и Linux, имеет широкий функционал (балансировка, репликация, бекапы). Так же может работать в кластере гипервизоров, что необходимо для работы 100 виртуальных машин.

Думаю еще подойдет vSphere, платформа серверной виртуализации от VMware.

*2.*   *Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.*

KVM: open source решение, хорошо поддерживает Windows гостей, имеет возможности по управлению сравнимые с платными гипервизорами.

*3.*   *Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.*

VirtualBox - бесплатный как для корпоративного, так и для личного использования. Отлично работает Windows, а также позволяет компьютерам без аппаратной виртуализации легко запускать виртуальные машины. 

Hyper-V Server, лучше всего работает с Windows операционных систем и поддерживает собственное облако Azure Microsoft, бесплатный.

*4.*   *Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.*

LXD, так как содержит огромную библиотеку с разными дистрибутивами в большом количестве конфигураций в виде контейнеров. 

Еще Virlual Box, т.к. удобно разворачивать машины через Linux

### Задача 4: Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

проблемы и недостатки гетерогенной среды виртуализации:

·    Проблема управления разными средами из-за частого перемещения данных между ними

·    Перемещают данные (из физической среды в виртуальную) при помощи разных инструментов

·    Большие расходы на штат инженеров, из-за сопровождения для разных систем (кадровые издержки)

·    Финансовые затраты, так как необходимо содержать несколько систем одновременно (если считать платные версии)

·    Если требуется интегрировать гипервизор с какими-то внешними системами - нужно делать отдельно для каждой платформы

·    Разнородность директорий хранения данных и произвольное расположение виртуальных машин в инфраструктуре значительно усложняет задачу управления огромными объемами динамических данных.

 Для решения проблем можно попробовать воспользоваться:  

 Необходимо использовать комплексные решения, которые смогут функционировать как в физической, так и в виртуальной среде 

 Нужно максимально снизить вероятность несовместимости технологий и упростить управление инфраструктурой для обеспечения совместимости и масштабируемости ИТ-инфраструктуры в рамках всей виртуальной среды 

 Необходимость в универсальной платформе для удобного перемещения и защиты данных – универсальная платформа упростит перемещение данных между гипервизорами и обеспечит их надежную защиту, автоматически создавая виртуальные машины в качестве резервной копии физических серверов, чтобы не перемещать виртуальные машины полностью. 

 Если бы у меня был выбор создавать гетерогенную среду или нет, то, наверное, я бы попробовала. Бывает есть необходимость подключится к виртуальной машине которая находится на сервере при этом сервер сломался и доступа нет, а доступ нужен срочно, то имеющий бекап виртуальной машины можно мигрировать в другое доступное место для подключения.
