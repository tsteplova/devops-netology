### Домашнее задание к занятию "5.3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"

****

#### Задача 1

> Сценарий выполнения задачи:
>
> - создайте свой репозиторий на https://hub.docker.com;
> - выберете любой образ, который содержит веб-сервер Nginx;
> - создайте свой fork образа;
> - реализуйте функциональность: запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
>
> ```
> <html>
> <head>
> Hey, Netology
> </head>
> <body>
> <h1>I’m DevOps Engineer!</h1>
> </body>
> </html>
> ```
>
> Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

Ответ 

[https://hub.docker.com/repository/docker/tsteplova/nginx]:

![docker.png](https://github.com/tsteplova/devops-netology/blob/fix/docker.png?raw=true)

****

#### Задача 2

> <p align="justify"> Посмотрите на сценарий ниже и ответьте на вопрос: "Подходит ли в этом сценарии использование Docker контейнеров или лучше  подойдет виртуальная машина, физическая машина? Может быть возможны  разные варианты?"</p>
>
> Детально опишите и обоснуйте свой выбор.
>
> \--
>
> Сценарий:

> - Высоконагруженное монолитное java веб-приложение;

<p align="justify"> Скорей всего должны быть масштабируемыми и восприимчивыми к высоким нагрузкам в связи с этим удобней будет использовать контейнеры (быстро разворачиваются, менее требовательны к месту и прочим ресурсам).</p>

<p align="justify"> Но если вдруг в приложение не заложено масштабирование то можно воспользоваться физической машиной (экономия ресурсов на виртуализацию).</p>

> - Nodejs веб-приложение;

<p align="justify"> Лучше подойдет Docker, для быстрого развернутого приложения со всеми необходимыми библиотеками.</p>

> - Мобильное приложение c версиями для Android и iOS;

<p align="justify"> Есть разные проекты (например Docker-OSX now has a Discord server & Telegram!) , посвящённые запуску эмуляторов и приложений для Android/iOS с использованием Docker. Чтобы запустить docker на android, он должен поддерживать API высокого уровня докера.  Подойдет виртуальная машина.</p>

> - Шина данных на базе Apache Kafka;

<p align="justify"> Брокеры активно используются в современных распределённых приложениях, доставка приложения через докер на сервера и разработчикам в тестовую среду должна упростить жизнь.</p>

<p align="justify"> Ещё очень важно иметь возможность быстро откатиться, если приложение обновили, и в продакшене что-то пошло не так. Докер будет особенно удобен чтобы "вернуть, как было" один из центральных узлов приложения - шину.</p>

> - <p align="justify"> Elasticsearch кластер для реализации логирования продуктивного  веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;</p>

<p align="justify"> Docker подойдёт лучше, так как он будет удобней для кластеризации.</p>

> - Мониторинг-стек на базе Prometheus и Grafana;

<p align="justify"> Подойдет Docker. Так как к метрикам ядра требуется прямой доступ разворачивать node_exporter с Docker не стоит, а вот Prometheus и Grafana можно использовать в Докере.</p>

> - <p align="justify"> MongoDB, как основное хранилище данных для java-приложения;</p>

<p align="justify"> Подойдет Docker. На Docker Hub есть официальный образ MongoDB.</p>

> - <p align="justify"> Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.</p>

<p align="justify"> Думаю удобней будет виртуальная машина, т.к. серверу GitLab не требуется масштабирование или деплой новой версии несколько раз в день, а виртуальная машина позволит очень удобно делать бекапы и при необходимости мигрировать её в кластере.</p>

<p align="justify"> Если в компании повсеместно используются контейнеры - тогда, может, будет удобней Docker, т.к. инженерам это будет привычней.</p>

****

#### Задача 3

> - <p align="justify"> Запустите первый контейнер из образа 'Centos' c любым тэгом в фоновом режиме, подключив папку `/data` из текущей рабочей директории на хостовой машине в `/data` контейнера;</p>
>
> - <p align="justify"> Запустите второй контейнер из образа 'debian' в фоновом режиме, подключив папку `/data` из текущей рабочей директории на хостовой машине в `/data` контейнера;</p>
>
> - <p align="justify"> Подключитесь к первому контейнеру с помощью `docker exec` и создайте текстовый файл любого содержания в `/data`;</p>
>
> - <p align="justify"> Добавьте еще один файл в папку `/data` на хостовой машине;</p>
>
> - <p align="justify"> Подключитесь во второй контейнер и отобразите листинг и содержание файлов в `/data` контейнера.</p>

```
Подымаем первый контейнер, centos
```

**docker run -d -v /data:/data centos sleep infinity**

![docker1.png](https://github.com/tsteplova/devops-netology/blob/fix/docker1.png?raw=true)

При помощи exec, на уже запущённом контейнере вызываю bash, через ls показываю смотрим volume.

**docker exec -it a7827fe3628d bash**

![docker2.png](https://github.com/tsteplova/devops-netology/blob/fix/docker2.png?raw=true)

```
Подымаем второй контейнер, debian
```

**docker run -d -v /data:/data debian:stable**

![docker3.png](https://github.com/tsteplova/devops-netology/blob/fix/docker3.png?raw=true)

При помощи exec, на уже запущённом контейнере вызываю bash, через ls показываю смотрим volume.

**docker exec -it 4826225b9b0e bash**

![docker4.png](https://github.com/tsteplova/devops-netology/blob/fix/docker4.png?raw=true)

С контейнера под centos создаю в директории файл

**echo "Hello Netology" > /data/centos.txt**

![docker5.png](https://github.com/tsteplova/devops-netology/blob/fix/docker5.png?raw=true)

В директории /data в контейнере с Debian

![docker6.png](https://github.com/tsteplova/devops-netology/blob/fix/docker6.png?raw=true)

****

